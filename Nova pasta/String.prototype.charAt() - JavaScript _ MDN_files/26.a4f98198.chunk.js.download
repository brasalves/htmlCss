(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[26],{71:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return q}));var n=r(25),c=r(27),s=r(28),i=r(29),a=r(6),u=r(9),o=r.n(u),l=r(12),h=r(3),j=r(0),b=r(1),f=r.n(b),d=r(2),O=r(4),m=r(115),g=r(95),p=r.n(g),v=r(14),x=r(96),w=r.n(x),y=r(97),k=function(){function e(t){Object(n.a)(this,e),this.haystack=void 0,this.haystack=t}return Object(c.a)(e,[{key:"search",value:function(e,t){var r=t.limit,n=void 0===r?10:r,c=e.toLowerCase();return this.haystack.filter((function(e){return w()(c,e.url.toLowerCase())})).slice(0,1e3).map((function(t){var r=Object(y.a)(e,t.url,{withScore:!0,withRanges:!0});return Object.assign(r,t)})).filter((function(e){return e.match&&e.score&&e.score>0})).sort((function(e,t){return t.score&&e.score?t.score-e.score:0})).slice(0,n).map((function(e){return Object.assign({substrings:e.ranges?E(e.url,e.ranges):[]},e)}))}}]),e}();function E(e,t){var r=[];return t.forEach((function(n,c){var s=n.start,i=n.stop;r.push({str:e.slice(s,i),match:!0});var a=t[c+1];a?r.push({str:e.slice(i,a.start),match:!1}):r.push({str:e.slice(i,e.length),match:!1})})),r}var S=r(33),N=r(10),z=r(23);function C(e){return e.startsWith("/")&&!/\s/.test(e)}function I(e){var t=e.title,r=e.q.trim().toLowerCase().split(/[ ,]+/),n=r.map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})),c="\\b(".concat(n.join("|"),")"),s=t.split(new RegExp(c,"gi"));return Object(j.jsx)("b",{children:s.map((function(e,t){var n="".concat(e,":").concat(t);return r.includes(e.toLowerCase())?Object(j.jsx)("mark",{children:e},n):Object(j.jsx)("span",{children:e},n)}))})}function M(e){var t=e.uri,r=e.substrings;if(r)return Object(j.jsx)("small",{children:r.map((function(e,t){var r="".concat(e.str,":").concat(t);return e.match?Object(j.jsx)("mark",{children:e.str},r):Object(j.jsx)("span",{children:e.str},r)}))});var n=t.split("/").slice(1).filter((function(e){return"docs"!==e}));return Object(j.jsx)("small",{children:n.join(" / ")})}function R(e){var t=e.inputValue,r=e.onChangeInputValue,n=e.isFocused,c=e.onChangeIsFocused,s=e.onResultPicked,i=e.defaultSelection,u=Object(d.g)(),f=Object(N.a)(),g=function(){var e=Object(b.useState)(!1),t=Object(h.a)(e,2),r=t[0],n=t[1],c=Object(b.useState)(null),s=Object(h.a)(c,2),i=s[0],a=s[1],u=Object(d.h)().locale,j="/".concat(u||"en-US","/search-index.json"),f=Object(v.a)(r?j:null,function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((r=e.sent).ok){e.next=9;break}return e.t0=Error,e.next=7,r.text();case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:return e.next=11,r.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{revalidateOnFocus:!1}),O=f.error,m=f.data;return Object(b.useEffect)((function(){if(m&&!i){var e=p.a.create({tokenize:"forward"});m.forEach((function(t,r){var n=t.title;e.add(r,n)}));var t=new k(m);a({flex:e,fuzzy:t,items:m})}}),[i,r,m]),Object(b.useMemo)((function(){return[i,O,function(){return n(!0)}]}),[i,O,n])}(),x=Object(h.a)(g,3),w=x[0],y=x[1],E=x[2],R=Object(b.useRef)(null),F=Object(b.useRef)(null),q=Object(b.useRef)(!1),L=function(e,t){var r=Object(b.useState)(!1),n=Object(h.a)(r,2),c=n[0],s=n[1],i=Object(b.useRef)(e);return Object(b.useEffect)((function(){if(i.current!==e){i.current=e,s(!1);var r=setTimeout((function(){s(!0)}),t);return function(){clearTimeout(r)}}}),[e,t]),c}(t,500);Object(b.useEffect)((function(){R.current&&!q.current&&(n&&(R.current.selectionStart=i[0],R.current.selectionEnd=i[1]),q.current=!0)}),[n,i]);var P=Object(b.useMemo)((function(){if(!w||!t||y)return[];var e=window.innerHeight<850?5:10;return C(t)?"/"===t?[]:w.fuzzy.search(t,{limit:e}).map((function(e){return{url:e.url,title:e.title,substrings:e.substrings}})):w.flex.search(t,{limit:e,suggest:!0}).map((function(e){return(w.items||[])[e]}))}),[t,w,y]),T="/".concat(f,"/search"),D=Object(b.useMemo)((function(){var e=new URLSearchParams;return e.set("q",t.trim()),"".concat(T,"?").concat(e.toString())}),[T,t]),U=Object(b.useMemo)((function(){return{url:D,title:"",substrings:[]}}),[D]),V=Object(m.a)({items:0===P.length?[U]:P,inputValue:t,defaultIsOpen:n,onSelectedItemChange:function(e){var t,n=e.selectedItem;n&&(u(n.url),r(""),W(),G(),null===(t=R.current)||void 0===t||t.blur(),s&&s(),window.scroll({top:0,left:0,behavior:"smooth"}))}}),H=V.getInputProps,J=V.getItemProps,$=V.getMenuProps,A=V.getComboboxProps,B=V.highlightedIndex,K=V.isOpen,W=V.reset,G=V.toggleMenu;Object(z.b)(R),Object(b.useEffect)((function(){n&&E()}),[E,n]),Object(b.useEffect)((function(){var e=P[B];if(e&&Object(S.c)()){var t=setTimeout((function(){Object(S.b)("".concat(e.url,"/index.json"))}),500);return function(){clearTimeout(t)}}}),[B,P]);var Q=K&&t.trim()?y?Object(j.jsx)("div",{className:"searchindex-error",children:"Error initializing search index"}):w?Object(j.jsxs)(j.Fragment,{children:[0===P.length&&"/"!==t?Object(j.jsxs)("div",Object(a.a)(Object(a.a)({},J({className:"nothing-found result-item "+(0===B?"highlight":""),item:U,index:0})),{},{children:["No document titles found.",Object(j.jsx)("br",{}),Object(j.jsxs)(O.b,{to:D,children:["Site search for ",Object(j.jsx)("code",{children:t})]})]})):P.map((function(e,r){return Object(j.jsxs)("div",Object(a.a)(Object(a.a)({},J({key:e.url,className:"result-item "+(r===B?"highlight":""),item:e,index:r})),{},{children:[Object(j.jsx)(I,{title:e.title,q:t}),Object(j.jsx)("br",{}),Object(j.jsx)(M,{uri:e.url,substrings:e.substrings})]}))})),C(t)&&Object(j.jsx)("div",{className:"fuzzy-engaged",children:"Fuzzy searching by URI"})]}):L?Object(j.jsx)("div",{className:"indexing-warning",children:Object(j.jsx)("em",{children:"Initializing index"})}):null:null;return Object(j.jsxs)("form",Object(a.a)(Object(a.a)({action:T},A({ref:F,className:"search-form search-widget",id:"nav-main-search",role:"search",onSubmit:function(e){e.preventDefault()}})),{},{children:[Object(j.jsx)("label",{htmlFor:"main-q",className:"visually-hidden",children:"Search MDN"}),Object(j.jsx)("input",Object(a.a)({},H({type:"search",className:K?"has-search-results search-input-field":"search-input-field",id:"main-q",name:"q",placeholder:Object(z.a)(n),onMouseOver:E,onFocus:function(){c(!0)},onBlur:function(){return c(!1)},onKeyDown:function(e){"Escape"===e.key&&R.current?R.current.blur():"Enter"===e.key&&t.trim()&&-1===B&&(R.current.blur(),F.current.submit())},onChange:function(e){e.target instanceof HTMLInputElement&&r(e.target.value)},ref:function(e){R.current=e}}))),Object(j.jsx)("input",{type:"submit",className:"ghost search-button",value:"","aria-label":"Search"}),Object(j.jsx)("div",Object(a.a)(Object(a.a)({},$()),{},{children:Q&&Object(j.jsx)("div",{className:"search-results",children:Q})}))]}))}var F=function(e){Object(s.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(n.a)(this,r);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={hasError:!1},e}return Object(c.a)(r,[{key:"render",value:function(){return this.state.hasError?Object(j.jsx)("div",{children:"Error while rendering search. Check console for details."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error("There was an error while trying to render search",e),{hasError:!0}}}]),r}(f.a.Component);function q(e){return Object(j.jsx)(F,{children:Object(j.jsx)(R,Object(a.a)({},e))})}}}]);
//# sourceMappingURL=26.a4f98198.chunk.js.map